<module:layout/normal>
    <div class="top-wrap">
        <module:head-menu />
        
        <div class="section">
            <div class="search">
                <input type="text" id="key" placeholder="Search" />
            </div>
            <div class="mw-list">
                {{each list as item}}
                <div class="item" data-name={{item.name}} data-tags="{{item.tags.join(',')}}">
                    <div class="name">
                        <a href="{{item.npm}}">{{item.name}}</a>
                        <span class="version">v{{item.version}}</span>
                    </div>
                    <div class="des">
                        {{item.des}}
                    </div>
                    <div class="tags">
                        tags:{{each item.tags as tag}}<a href="?tag={{tag}}">{{tag}}</a>{{/each}}
                    </div>
                </div>
                {{/each}}
            </div>
        </div>
    </div>
    <script src="//cdn.bootcss.com/jquery/1.12.4/jquery.min.js"></script>    
    <script>
      $(function(){
        var items = $('.mw-list .item');
        var domKey = $('#key');
        domKey.on('keyup', function(){
          var val = domKey.val().trim();
          items.each(function(idx, n){
            var item = $(n),
                tags = item.attr('data-tags'),
                name = item.attr('data-name');

            item.toggle(!val || tags.indexOf(val) > -1 || name.indexOf(val) > -1)
          });
        })
      })
    </script>
</module>
